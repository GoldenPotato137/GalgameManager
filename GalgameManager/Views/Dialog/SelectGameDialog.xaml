<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="GalgameManager.Views.Dialog.SelectGameDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:dialog="using:GalgameManager.Views.Dialog" xmlns:models="using:GalgameManager.Models"
    xmlns:enums="using:GalgameManager.Enums"
    xmlns:converter="using:GalgameManager.Helpers.Converter"
    mc:Ignorable="d"
    DefaultButton="Close">

    <ContentDialog.Resources>
        <converter:EnumToStringConverter x:Key="EnumToStringConverter"/>
    </ContentDialog.Resources>

    <Grid MaxHeight="600" MinWidth="400">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBox x:Name="SearchBox"
                 Grid.Row="0" 
                 Text="{x:Bind SearchKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 Margin="0,0,0,10"/>

        <ItemsRepeater Grid.Row="1" 
                      ItemsSource="{x:Bind Careers}"
                      Margin="0,0,0,10">
            <ItemsRepeater.Layout>
                <UniformGridLayout MinItemWidth="100" MinRowSpacing="4" MinColumnSpacing="4"/>
            </ItemsRepeater.Layout>
            <ItemsRepeater.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Career, Converter={StaticResource EnumToStringConverter}}"
                             IsChecked="{Binding IsChecked, Mode=TwoWay}"/>
                </DataTemplate>
            </ItemsRepeater.ItemTemplate>
        </ItemsRepeater>

        <ListView Grid.Row="2" 
                  x:Name="GamesList"
                  SelectionMode="Single"
                  Margin="0,0,0,10">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="models:Galgame">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="{x:Bind ImagePath.Value}" 
                               Width="50" Height="50" 
                               Margin="0,0,10,0"/>
                        <TextBlock Text="{x:Bind Name.Value}" 
                                 VerticalAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</ContentDialog>
